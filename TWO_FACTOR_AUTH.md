# 二重认证功能说明

## 概述
本系统已集成基于数字匹配的二重认证功能，使用 https://web-auth-five.vercel.app/ 提供的认证服务。

## 工作流程

1. **用户输入账号密码**
   - 用户在登录页面输入用户名和密码
   - 点击"登录"按钮

2. **账号密码验证**
   - 系统验证用户名和密码是否正确
   - 如果错误，显示错误提示
   - 如果正确，进入第二步

3. **创建认证会话**
   - 系统自动调用认证API创建会话
   - 返回一个3位数字（clientNumber）和会话ID（sessionId）

4. **显示认证数字**
   - 登录页面切换到二重认证界面
   - 显示需要匹配的3位数字
   - 提供"打开认证页面"按钮

5. **用户进行认证**
   - 用户点击按钮打开认证页面（新标签页）
   - 在认证页面看到3个数字选项
   - 选择与登录页面显示相同的数字

6. **轮询验证状态**
   - 客户端每2秒检查一次认证状态
   - 显示倒计时（5分钟有效期）

7. **认证完成**
   - 认证成功后，系统自动发放JWT token
   - 跳转到仪表板页面

## 技术实现

### 后端 API (api/login.js)
- 支持两阶段登录：
  - 第一阶段：验证账号密码，返回认证会话信息
  - 第二阶段：验证二重认证状态，返回JWT token

### 前端 (src/components/LoginPage.vue)
- 两个界面状态：
  - 账号密码输入界面
  - 二重认证等待界面
- 自动轮询认证状态
- 倒计时显示
- 支持取消认证

## 安全特性

1. **时效性**：认证会话5分钟后自动过期
2. **数字匹配**：需要在另一个页面确认相同数字
3. **会话隔离**：每次登录创建独立的认证会话
4. **自动轮询**：无需手动刷新，自动检测认证状态

## 用户体验

- 清晰的步骤提示
- 大号数字显示，易于识别
- 一键打开认证页面
- 实时状态反馈
- 倒计时提醒
- 支持取消重新登录
